(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{336:function(e,t,n){e.exports=n(700)},540:function(e,t){},547:function(e,t){},548:function(e,t){},550:function(e,t){},584:function(e,t){},586:function(e,t){},587:function(e,t){},593:function(e,t){},596:function(e,t){},616:function(e,t){},619:function(e,t){},636:function(e,t){},639:function(e,t){},680:function(e,t){},689:function(e,t){},691:function(e,t){},693:function(e,t,n){},700:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(23),r=n.n(i),l=n(72),s=n(168),c=n.n(s),u=n(263),d=n(66),m=n(67),p=n(70),g=n(68),f=n(71),h=n(170),b=n(22),y=n(36),v=n.n(y),E=n(115),w=n(32),C=n.n(w),k=n(18),B=n.n(k),S=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(g.a)(t).call(this,e))).state={imageId:0},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({imageId:Math.floor(1+15*Math.random())})}},{key:"render",value:function(){var e=this.props.classes,t="/assets/animals/Group_".concat(this.state.imageId,".svg");return o.a.createElement("div",{style:{zIndex:2}},o.a.createElement(C.a,{className:e.card,elevation:2},o.a.createElement("div",null,o.a.createElement("img",{className:e.image,src:t,style:{float:"left",marginRight:"20px"}}),o.a.createElement("div",{style:{position:"relative",paddingTop:"20px"}},o.a.createElement(B.a,{variant:"h4",gutterBottom:!0},"Hello,"),o.a.createElement(B.a,{variant:"h6",gutterBottom:!0},"Get Started by Creating a Bond")))))}}]),t}(a.Component),x=Object(b.withStyles)(function(e){return{card:Object(E.a)({},e.mixins.gutters(),{maxWidth:390,paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",overflow:"auto"}),image:{marginLeft:"auto",marginRight:"auto",display:"block"}}})(S),N=n(48),O=n.n(N),M=n(33),A=n.n(M),j=n(29),I=n.n(j),T=n(26),D=n.n(T),F=n(267),R=n.n(F),_=n(266),P=n.n(_),z=n(61),G=n.n(z),L=n(69),Y=n.n(L),H=n(116);function J(e){var t=new Date(e);return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()}var W=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(g.a)(t).call(this,e))).submitBond=function(){n.validate(n.state.bondMessage,n.state.stakeAmount,n.state.deadline,n.state.friends).then(function(e){return n.setState({error:null}),console.log(e.bondMessage+","+e.stakeAmount+","+Math.floor(e.deadline.getTime()/1e3)+","+JSON.stringify(e.friends)),n.props.contract.newResolution(e.bondMessage,e.stakeAmount*Math.pow(10,18),Math.floor(e.deadline.getTime()/1e3),e.friends[0],e.friends[1],e.friends[2],e.friends[3],e.friends[4],{gas:2e6,from:n.props.web3.eth.accounts[0],to:n.props.web3.eth.accounts[0],value:e.stakeAmount*Math.pow(10,18)})}).then(function(e){return n.props.contract.resolutionCount.call()}).then(function(e){n.props.onClose(e)}).catch(function(e){n.setState({error:e.toString()})})},n.validate=function(e,t,n,a){var o=!a.map(function(e){return null!==e&&66==e.length}).includes(!1);return new Promise(function(i,r){null!==e&&e.length>1&&null!==t&&t>0&&null!==n&&o?i({bondMessage:e,stakeAmount:t,deadline:n,friends:a}):(null!==e&&0!==e.length||r("Please enter your Bond promise"),null!==t&&0!==t||r("Please enter a valid Aion amount to stake"),console.log("deadline:"+n),null===n&&r("Please enter a valid date for your Bond"),o||r("Please enter 5 valid Aion adresses"))})},n.handleBondMessage=function(e){n.setState({bondMessage:e})},n.handleBondStake=function(e){n.setState({stakeAmount:e})},n.handleBondDeadline=function(e){n.setState({deadline:e})},n.state={open:e.open,bondMessage:null,stakeAmount:1,deadline:new Date,friends:[null,null,null,null,null],error:null},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({imageId:Math.floor(1+15*Math.random())})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.open,i=t.onClose,r=this.state,l=r.bondMessage,s=r.stakeAmount,c=r.deadline,u=r.friends,d=r.error;return o.a.createElement("div",{id:"test"},o.a.createElement(O.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:a,onClose:i},o.a.createElement("div",{className:n.root},o.a.createElement(C.a,{className:n.card,elevation:1},o.a.createElement("img",{alt:"Aion Watermark",style:{position:"absolute",bottom:0,right:0,zIndex:0},width:"250",height:"250px",src:"assets/images/light_aion_logo_watermark.png"}),o.a.createElement("div",null,o.a.createElement(B.a,{variant:"h4",gutterBottom:!0},"Your Bond"),o.a.createElement(v.a,{spacing:24},o.a.createElement(A.a,{className:n.input,id:"outlined-multiline-flexible",label:"Your Promise",onChange:function(t){return e.handleBondMessage(t.target.value)},value:l,multiline:!0,fullWidth:!0,rowsMax:"4",margin:"normal",variant:"outlined"}),o.a.createElement(A.a,{id:"standard-name",label:"Your Stake",onChange:function(t){return e.handleBondStake(t.target.value)},value:s,margin:"normal",type:"number",variant:"outlined",InputProps:{startAdornment:o.a.createElement(G.a,{position:"start"},o.a.createElement("img",{alt:"Aion Logo",src:"/assets/images/white_aion_logo.png",width:"20px",height:"20px"}))}}),"\xa0",o.a.createElement(H.a,{margin:"normal",label:"Your Deadline",value:c,onChange:this.handleBondDeadline,variant:"outlined"}),o.a.createElement(B.a,{variant:"h5",style:{marginTop:"10px"}},"Your Friends:"),o.a.createElement("div",null,o.a.createElement(v.a,null,o.a.createElement(A.a,{id:"standard-name",label:"Friend 1",onChange:function(e){u[0]=e.target.value},value:u[0],margin:"normal",variant:"outlined",className:this.props.classes.input}),"\xa0",o.a.createElement(A.a,{id:"standard-name",label:"Friend 2",onChange:function(e){u[1]=e.target.value},value:u[1],margin:"normal",variant:"outlined",className:this.props.classes.input}),o.a.createElement(A.a,{id:"standard-name",label:"Friend 3",onChange:function(e){u[2]=e.target.value},value:u[2],margin:"normal",variant:"outlined",className:this.props.classes.input}),"\xa0",o.a.createElement(A.a,{id:"standard-name",label:"Friend 4",onChange:function(e){u[3]=e.target.value},value:u[3],margin:"normal",variant:"outlined",className:this.props.classes.input}),o.a.createElement(A.a,{id:"standard-name",label:"Friend 5",onChange:function(e){u[4]=e.target.value},value:u[4],margin:"normal",variant:"outlined",className:this.props.classes.input}),o.a.createElement("div",null,null!==d?o.a.createElement("span",null,o.a.createElement(B.a,{variant:"subtitle",gutterBottom:!0,style:{color:"#c41111"}},o.a.createElement(P.a,null),"\xa0",o.a.createElement("b",null,d))):null,o.a.createElement("div",{className:n.submit},o.a.createElement(I.a,{variant:"contained",color:"primary",disabled:""===this.state.message,className:n.button,onClick:this.submitBond},"Stake Your Bond",o.a.createElement(R.a,{className:n.rightIcon})))))))),o.a.createElement(D.a,{"aria-label":"Close",className:n.closeButton,onClick:function(){i(null)}},o.a.createElement(Y.a,null))))))}}]),t}(a.Component),V=Object(b.withStyles)(function(e){return{root:{width:"100%",height:"100%"},card:Object(E.a)({},e.mixins.gutters(),{maxWidth:500,paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",marginLeft:"auto",marginRight:"auto",top:"50%",left:"50%",transform:"translate(-50%,-50%)",position:"absolute"}),image:{marginLeft:"auto",marginRight:"auto",display:"block"},input:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},submit:{textAlign:"center",marginBottom:8},rightIcon:{marginLeft:e.spacing.unit},button:{margin:e.spacing.unit,padding:2*e.spacing.unit},closeButton:{margin:e.spacing.unit,position:"absolute",top:0,right:0}}})(W),U=n(62),K=n.n(U),q=n(63),Q=n.n(q),X=n(65),Z=n.n(X),$=n(64),ee=n.n($);var te=Object(b.withStyles)(function(e){return{headingGrid:{flexGrow:1},card:{marginTop:24,maxWidth:500,background:"linear-gradient(45deg, #D4005E 30%, #FCF653 90%)",zIndex:1},cardContent:{margin:4*e.spacing.unit},actionsGroup:{background:"#ffffff"},price:{color:"#D4005E"}}})(function(e){var t=e.classes,n=e.bond,a=e.contract,i=e.web3;return o.a.createElement(K.a,{className:t.card},o.a.createElement(Q.a,null,o.a.createElement(ee.a,null,o.a.createElement(v.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},o.a.createElement(B.a,{gutterBottom:!0,variant:"h5",component:"h2"},J(n.endTime)),o.a.createElement(B.a,{className:t.price,gutterBottom:!0,variant:"h5",component:"h2"},"\xa0",o.a.createElement("img",{alt:"Aion Logo",src:"/assets/images/red_aion_logo.png",width:"18px",height:"18px"}),"\xa0",n.stake)),o.a.createElement(B.a,{className:t.cardContent,component:"p"},n.message))),o.a.createElement(Z.a,{className:t.actionsGroup},o.a.createElement(I.a,{size:"small",color:"primary",onClick:function(){!function(e,t,n){console.log(null!==e&&null!==t),t.finalResult(n).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}(i,a,n.id)}},"Complete")))}),ne=n(268),ae=n.n(ne);function oe(e,t,n,a){console.log(null!==e&&null!==t&&a),t.makeVote(n,a).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}var ie=Object(b.withStyles)(function(e){return{headingGrid:{flexGrow:1},card:{marginTop:24,maxWidth:500,background:"linear-gradient(45deg, #D4005E 30%, #FCF653 90%)",zIndex:1},cardContent:{margin:4*e.spacing.unit},actionsGroup:{background:"#ffffff",display:"flex"},price:{color:"#D4005E"},actionPositive:{color:"#00ff00"},actionNegative:{color:"#ff0000"}}})(function(e){var t=e.classes,n=e.bond,a=e.contract,i=e.web3;return o.a.createElement(K.a,{className:t.card},o.a.createElement(Q.a,null,o.a.createElement(ee.a,null,o.a.createElement(v.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},o.a.createElement(B.a,{gutterBottom:!0,variant:"h5",component:"h2"},J(n.endTime)),o.a.createElement(B.a,{className:t.price,gutterBottom:!0,variant:"h5",component:"h2"},"\xa0",o.a.createElement("img",{alt:"Aion Logo",src:"/assets/images/red_aion_logo.png",width:"18px",height:"18px"}),"\xa0",n.stake)),o.a.createElement(B.a,{className:t.cardContent,component:"p"},n.message))),o.a.createElement(Z.a,{className:t.actionsGroup},o.a.createElement(D.a,{className:t.actionPositive,"aria-label":"Approve",onClick:function(){oe(i,a,n.id,!0)}},o.a.createElement(ae.a,null)),o.a.createElement(D.a,{className:t.actionNegative,"aria-label":"Disapprove",onClick:function(){oe(i,a,n.id,!1)}},o.a.createElement(Y.a,null))))}),re=n(269),le=(n(525),n(693),n(270)),se=n.n(le),ce=n(271),ue=n.n(ce),de=n(113),me=n.n(de),pe=n(272),ge=n.n(pe),fe=n(114),he=n.n(fe),be=n(92),ye=function(e){function t(e,n){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).componentDidMount=function(){Object(u.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))()},a.handleOpenCreateBond=function(){a.setState({createBondOpened:!0}),console.log("handleOpen:")},a.onBondCreationFinished=function(e){console.log("onBondCreationFinished:"+e),a.setState({createBondOpened:!1}),null!=e&&(a.setState({commitState:1}),a.subscribeToBondCreated(e).then(function(e){a.setState({commitState:2})}))},a.subscribeToBondCreated=function(e){return new Promise(function(t,n){var o={filter:{id:e},fromBlock:"latest"};console.log("Listening for ResolutionCreated event for id="+e),a.state.contract.ResolutionCreated(o,function(e,o){console.log("Bond Registered:"+JSON.stringify(o)),e?n(e):o&&(t(o),console.log("ResolutionCreated gas:"+a.state.web3.eth.getTransactionReceipt(o.transactionHash).nrgUsed))})})},a.accountChanged=function(e){console.log(be.BOND_ABI),console.log(be.CONTRACT_ADDRESS);var t=window.aionweb3.eth.contract(be.BOND_ABI).at(be.CONTRACT_ADDRESS);console.log(t);var n=t.resolutionCount().toNumber();console.log(n),a.setState({web3:window.aionweb3,contract:t});var o=t.getParticipatingResolutions(window.aionweb3.eth.accounts[0]);console.log(o);var i=o[0].map(function(e,t){return{id:e.toNumber(),creator:o[1][t]}});console.log(i);var r=i.map(function(e){var n=t.getResolution(e.id);return{id:n[0].toNumber(),message:n[1],stake:(n[2].toNumber()/Math.pow(10,18)).toFixed(2),endTime:1e3*n[3].toNumber(),friendsList:n[4],creator:e.creator}});console.log(r),a.setState({bonds:r})},a.handleSnackClose=function(e,t){"clickaway"!==t&&a.setState({commitState:0})},a.state={web3:null,contract:null,createBondOpened:!1,bonds:null,commitState:0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.classes,a=this.state,i=a.createBondOpened,r=a.contract,s=a.web3,c=a.bonds,u=a.commitState,d=[];if(null===c||0===c.length)d.push(o.a.createElement(x,{style:{height:"100%",zIndex:2}}));else{var m=0,p=[],g=0,f=[];c.forEach(function(e){e.creator?p.push(o.a.createElement(te,{id:m++,bond:e,contract:r,web3:s})):f.push(o.a.createElement(ie,{id:g++,bond:e,contract:r,web3:s}))}),p.length>0&&(p.unshift(o.a.createElement(h.a,{id:m++,className:n.sectionHeader,variant:"h3",gutterBottom:!0},"Your Bonds")),d.push.apply(d,p)),f.length>0&&(f.unshift(o.a.createElement(h.a,{id:g++,className:n.sectionHeader,variant:"h3",gutterBottom:!0},"Friend's Bonds")),d.push.apply(d,f))}return o.a.createElement("div",{style:{height:"100%"}},o.a.createElement("canvas",{id:"stars",width:"300",height:"300"}," "),o.a.createElement(re.Web3Provider,{style:{zIndex:1},onChangeAccount:function(e){return t.accountChanged(e)}},o.a.createElement(v.a,{className:n.root,container:!0,direction:"column",justify:"center",spacing:"32",alignItems:"center"},d),o.a.createElement(me.a,{color:"primary","aria-label":"Add",className:n.fab,onClick:this.handleOpenCreateBond},o.a.createElement(ge.a,null)),o.a.createElement(he.a,(e={ContentProps:{classes:{root:1==u?n.waitingSnack:n.doneSnack}},anchorOrigin:{vertical:"bottom",horizontal:"left"},open:1===u||2===u,autoHideDuration:6e3,onClose:function(){t.setState({commitState:0})}},Object(l.a)(e,"ContentProps",{"aria-describedby":"message-id"}),Object(l.a)(e,"message",o.a.createElement("span",{id:"message-id"},1==u?"Saving Bond to the blockchain...":"Bond has been saved to the blockchain... ")),Object(l.a)(e,"action",[o.a.createElement(D.a,{key:"close","aria-label":"Close",color:"inherit",className:n.close,onClick:this.handleClose},o.a.createElement(Y.a,null))]),e)),o.a.createElement(V,{web3:s,contract:r,open:i,onClose:this.onBondCreationFinished})))}}]),t}(a.Component),ve=Object(b.withStyles)(function(e){return{root:{minHeight:"100%",zIndex:1},fab:{position:"fixed",bottom:2*e.spacing.unit,zIndex:1,right:"20%",margin:"0 auto"},sectionHeader:{marginTop:4*e.spacing.unit,textShadow:"2px 2px rgba(0,0,0,0.3)",zIndex:2},waitingSnack:{background:se.a[600]},doneSnack:{background:ue.a[700]}}},{withTheme:!0})(ye),Ee=Object(b.createMuiTheme)({palette:{primary:{main:"#D4005E",contrastText:"#fff"},secondary:{main:"#FCF653",contrastText:"#fff"},type:"dark"}}),we=n(273);console.log(Ee),r.a.render(o.a.createElement(b.MuiThemeProvider,{theme:Ee},o.a.createElement(H.b,{utils:we.a},o.a.createElement(ve,null))),document.getElementById("root"))},92:function(e,t){var n="https://api.nodesmith.io/v1/aion/testnet/jsonrpc?apiKey=".concat("8baef3850b99477bb204280ff5a3c7b0");e.exports={CONTRACT_ADDRESS:"0xa0d8c51502d15fcd6c34ccc927fa0c21ff5fb6fe0526c1f814142bb5f8e63485",NODE_URL:n,BOND_ABI:[{constant:!1,inputs:[{name:"resolutionId",type:"uint128"},{name:"friendAddr",type:"address"}],name:"isFriend",outputs:[{name:"",type:"bool"}],payable:!1,type:"function",stateMutability:"nonpayable"},{constant:!0,inputs:[{name:"resolutionId",type:"uint128"}],name:"getResolution",outputs:[{name:"",type:"uint128"},{name:"",type:"string"},{name:"",type:"uint128"},{name:"",type:"uint128"},{name:"",type:"address[]"}],payable:!1,type:"function",stateMutability:"view"},{constant:!0,inputs:[],name:"resolutionCount",outputs:[{name:"",type:"uint128"}],payable:!1,type:"function",stateMutability:"view"},{constant:!0,inputs:[{name:"addr",type:"address"}],name:"getParticipatingResolutions",outputs:[{name:"",type:"uint128[]"},{name:"",type:"bool[]"}],payable:!1,type:"function",stateMutability:"view"},{constant:!1,inputs:[{name:"resolutionId",type:"uint128"}],name:"finalResult",outputs:[{name:"",type:"bool"}],payable:!1,type:"function",stateMutability:"nonpayable"},{constant:!1,inputs:[{name:"resolutionId",type:"uint128"},{name:"friendAddr",type:"address"}],name:"getFriend",outputs:[{name:"",type:"address"},{name:"",type:"bool"},{name:"",type:"bool"}],payable:!1,type:"function",stateMutability:"nonpayable"},{constant:!1,inputs:[{name:"_message",type:"string"},{name:"_stake",type:"uint128"},{name:"_endTime",type:"uint128"},{name:"friend1",type:"address"},{name:"friend2",type:"address"},{name:"friend3",type:"address"},{name:"friend4",type:"address"},{name:"friend5",type:"address"}],name:"newResolution",outputs:[],payable:!0,type:"function",stateMutability:"payable"},{constant:!1,inputs:[{name:"resolutionId",type:"uint128"},{name:"_voteCompleted",type:"bool"}],name:"makeVote",outputs:[],payable:!1,type:"function",stateMutability:"nonpayable"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"uint128"}],name:"ResolutionCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"resId",type:"uint128"},{indexed:!1,name:"vote",type:"bool"}],name:"VoteCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"uint128"}],name:"ResolutionCompleted",type:"event"}]}}},[[336,2,1]]]);
//# sourceMappingURL=main.e75c1b1f.chunk.js.map